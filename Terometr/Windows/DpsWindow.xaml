<Window x:Class="Terometr.Windows.DpsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Terometr.Themes"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        Title="DpsWindow" Height="300" Width="300"
        Style="{StaticResource DpsWindowStyle}"
        MinWidth="140"
        MinHeight="48"
        Loaded="Window_Loaded"
        StateChanged="Window_StateChanged"
        ShowInTaskbar="False"
        Deactivated="Window_Deactivated"
        Closing="Window_Closing"
        >
    <DockPanel
                                HorizontalAlignment="Stretch"
                                Background="Transparent"
                                VerticalAlignment="Stretch"
                                >
        <Border
                                    x:Name="titleBar"
                                    DockPanel.Dock="Top"
                                    Background="{StaticResource DpsWindowStyleTitleBarBrush}"
                                    BorderThickness="0"
                                    CornerRadius="5 5 0 0"
                                    Padding="0"
                                    >
            <Grid Height="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBlock
                                            x:Name="caption"
                                            Grid.Column="0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Margin="4 0 0 0"
                                            FontFamily="Comic Sans"
                                            FontSize="12"
                                            Opacity="1"
                                            Text="{Binding Path=Title, Mode=OneWay, RelativeSource={RelativeSource FindAncestor,AncestorType=Window}}" Foreground="{StaticResource DpsWindowStyleTitleBarTextBrush}" FontWeight="Bold"
                                            />
                <StackPanel
                                            Margin="0 0 4 0"
                                            Orientation="Horizontal"
                                                    Grid.Column="1"
                                                    HorizontalAlignment="Right">
                    <Button x:Name="buttonSay" Style="{StaticResource DpsWindowStyleTitleBarButton}">
                        <Path
                            Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="1"
                                                    Stretch="Fill"
                                                    Data="M26.722,0.88c-0.466-0.269-1.034-0.269-1.5,0L16.26,6.054H3.5C1.569,6.054,0,7.546,0,9.38v5.361
		c0,1.834,1.569,3.326,3.5,3.326h0.328l4.986,8.728l4.342-2.479l-3.568-6.246H17c0.056,0,0.111-0.001,0.168-0.004l8.055,4.648
		c0.232,0.135,0.49,0.2,0.75,0.2s0.518-0.065,0.75-0.2c0.465-0.269,0.75-0.764,0.75-1.3V2.18C27.472,1.643,27.186,1.148,26.722,0.88
		z M24.472,18.816l-6.246-3.605c-0.229-0.133-0.487-0.2-0.75-0.2c-0.112,0-0.226,0.013-0.335,0.037
		c-0.061,0.015-0.107,0.021-0.143,0.021h-4.014V9.054h3.678c0.264,0,0.521-0.069,0.75-0.201l7.06-4.076V18.816z
                            "
                                                    Width="16"
                                                    Height="16" />
                    </Button>
                    <Button x:Name="buttonConfig" Style="{StaticResource DpsWindowStyleTitleBarButton}">
                        <Path
                            Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="1"
                                                    Stretch="Fill"
                                                    Data="M358.379,84.649c-1.666-3.766-5.078-6.469-9.125-7.228c-4.053-0.762-8.211,0.523-11.127,3.429l-46.148,45.966
			c-6.986,6.987-16.279,10.835-26.162,10.836c-9.881,0-19.172-3.848-26.16-10.837c-6.988-6.988-10.837-16.278-10.838-26.161
			c0-9.883,3.85-19.173,10.822-26.148l46.107-45.974c2.922-2.912,4.219-7.079,3.465-11.135c-0.754-4.056-3.461-7.479-7.232-9.146
			c-12.121-5.362-25.594-8.197-38.965-8.198c-24.838,0.001-47.881,9.362-64.879,26.361L162.939,41.61
			c-26.348,26.348-34.146,65.179-20.72,99.207L17.281,265.755C6.138,276.9,0.001,291.714,0,307.473
			c-0.001,15.759,6.136,30.574,17.279,41.719c11.145,11.144,25.961,17.279,41.719,17.279c15.759-0.001,30.574-6.137,41.719-17.279
			L225.668,224.24c10.719,4.191,22.238,6.379,33.797,6.379c24.705,0,47.93-9.619,65.396-27.088l15.195-15.194
			C366.678,161.714,374.039,120.046,358.379,84.649z M259.465,205.619c-10.801-0.002-21.477-2.541-31.002-7.481
			c-5.295-2.744-11.396-1.079-15.518,3.293L83.038,331.512c-6.422,6.423-14.96,9.958-24.041,9.958s-17.619-3.536-24.041-9.957
			c-6.42-6.422-9.957-14.959-9.957-24.04s3.537-17.619,9.959-24.041l130.06-129.925c4.485-4.262,6.041-10.226,3.294-15.521
			c-13.596-26.223-8.598-57.795,12.305-78.698l15.197-15.196c12.277-12.278,29.041-19.04,47.201-19.04
			c3.373,0,6.752,0.243,10.096,0.719l-31.135,31.045c-11.711,11.71-18.158,27.279-18.158,43.839
			c0.002,16.561,6.449,32.13,18.16,43.839c11.709,11.711,27.279,18.16,43.84,18.159c16.561-0.002,32.129-6.45,43.82-18.141
			l31.215-31.093c2.965,20.931-3.602,42.364-18.475,57.238l-15.195,15.196C294.438,198.598,277.49,205.619,259.465,205.619z
                            "
                                                    Width="16"
                                                    Height="16" />
                    </Button>
                    <Button x:Name="buttonNew" Style="{StaticResource DpsWindowStyleTitleBarButton}">
                        <Path
                            Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="1"
                                                    Stretch="Fill"
                                                    Data="M 11.57,4.86
           C 11.57,4.86 10.36,4.86 10.36,4.86
             10.36,4.86 10.36,1.52 10.36,1.52
             10.36,1.52 4.73,1.52 4.73,1.52
             4.73,1.52 4.73,4.68 4.73,4.68
             4.73,4.68 1.21,4.68 1.21,4.68
             1.21,4.68 1.21,14.44 1.21,14.44
             1.21,14.44 8.15,14.44 8.15,14.44
             8.15,14.44 8.15,15.52 8.15,15.52
             8.15,15.52 0.00,15.52 0.00,15.52
             0.00,15.52 0.00,3.50 0.00,3.50
             0.00,3.50 3.43,0.44 3.43,0.44
             3.43,0.44 11.57,0.44 11.57,0.44
             11.57,0.44 11.57,4.86 11.57,4.86 Z
           M 6.31,9.81
           C 6.31,9.81 6.31,12.23 6.31,12.23
             6.31,12.23 9.86,12.23 9.86,12.23
             9.86,12.23 9.86,15.56 9.86,15.56
             9.86,15.56 12.45,15.56 12.45,15.56
             12.45,15.56 12.45,12.23 12.45,12.23
             12.45,12.23 16.00,12.23 16.00,12.23
             16.00,12.23 16.00,9.81 16.00,9.81
             16.00,9.81 12.45,9.81 12.45,9.81
             12.45,9.81 12.45,6.48 12.45,6.48
             12.45,6.48 9.86,6.48 9.86,6.48
             9.86,6.48 9.86,9.81 9.86,9.81
             9.86,9.81 6.31,9.81 6.31,9.81 Z "
                                                    Width="16"
                                                    Height="16" />
                    </Button>
                    <Button x:Name="buttonLog" Style="{StaticResource DpsWindowStyleTitleBarButton}">
                        <Path
                            Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="1.5"
                                                    Stretch="Fill"
                                                    Data="M25.462,19.105v6.848H4.515v-6.848H0.489v8.861c0,1.111,0.9,2.012,2.016,2.012h24.967c1.115,0,2.016-0.9,2.016-2.012
		v-8.861H25.462z
                            M14.62,18.426l-5.764-6.965c0,0-0.877-0.828,0.074-0.828s3.248,0,3.248,0s0-0.557,0-1.416c0-2.449,0-6.906,0-8.723
		c0,0-0.129-0.494,0.615-0.494c0.75,0,4.035,0,4.572,0c0.536,0,0.524,0.416,0.524,0.416c0,1.762,0,6.373,0,8.742
		c0,0.768,0,1.266,0,1.266s1.842,0,2.998,0c1.154,0,0.285,0.867,0.285,0.867s-4.904,6.51-5.588,7.193
		C15.092,18.979,14.62,18.426,14.62,18.426z"
                                                    Width="16"
                                                    Height="16" />
                    </Button>
                    <Button x:Name="buttonPrev" Style="{StaticResource DpsWindowStyleTitleBarButton}">
                        <Path
                            Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="1.5"
                                                    Stretch="Fill"
                                                    Data="M 119.00,209.00
           C 116.91,209.00 113.94,209.12 112.00,208.40
             108.15,206.98 100.26,198.26 97.00,195.00
             97.00,195.00 61.00,159.00 61.00,159.00
             61.00,159.00 39.00,137.00 39.00,137.00
             36.61,134.59 31.85,130.82 33.17,127.00
             34.01,124.56 39.94,119.06 42.00,117.00
             42.00,117.00 63.00,96.00 63.00,96.00
             63.00,96.00 98.00,61.00 98.00,61.00
             101.26,57.74 109.15,49.02 113.00,47.60
             114.94,46.88 117.91,47.00 120.00,47.00
             120.00,47.00 166.00,47.00 166.00,47.00
             166.00,47.00 145.00,69.00 145.00,69.00
             145.00,69.00 106.00,108.00 106.00,108.00
             106.00,108.00 224.00,108.00 224.00,108.00
             224.00,108.00 224.00,148.00 224.00,148.00
             224.00,148.00 106.00,148.00 106.00,148.00
             106.00,148.00 145.00,187.00 145.00,187.00
             145.00,187.00 166.00,209.00 166.00,209.00
             166.00,209.00 119.00,209.00 119.00,209.00 Z"
                                                    Width="16"
                                                    Height="16" />

                    </Button>
                    <Button x:Name="buttonNext" Style="{StaticResource DpsWindowStyleTitleBarButton}">
                        <Path
                            Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="1.5"
                                                    Stretch="Fill"
                                                    Data="M 136.00,47.00
           C 138.09,47.00 141.06,46.88 143.00,47.60
             146.85,49.02 154.74,57.74 158.00,61.00
             158.00,61.00 195.00,98.00 195.00,98.00
             195.00,98.00 217.00,120.00 217.00,120.00
             219.39,122.41 224.15,126.18 222.83,130.00
             221.99,132.44 216.06,137.94 214.00,140.00
             214.00,140.00 193.00,161.00 193.00,161.00
             193.00,161.00 158.00,196.00 158.00,196.00
             150.28,203.72 148.22,208.98 137.00,209.00
             137.00,209.00 90.00,209.00 90.00,209.00
             90.00,209.00 111.00,187.00 111.00,187.00
             111.00,187.00 150.00,148.00 150.00,148.00
             150.00,148.00 32.00,148.00 32.00,148.00
             32.00,148.00 32.00,108.00 32.00,108.00
             32.00,108.00 150.00,108.00 150.00,108.00
             150.00,108.00 111.00,69.00 111.00,69.00
             111.00,69.00 90.00,47.00 90.00,47.00
             90.00,47.00 136.00,47.00 136.00,47.00 Z"
                                                    Width="16"
                                                    Height="16" />

                    </Button>
                    <Button x:Name="buttonClose" Style="{StaticResource DpsWindowStyleTitleBarButton}"
                            Click="buttonClose_Click">
                        <Path
                                                    Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                                                    StrokeThickness="3"
                                                    Stretch="Fill"
                                                    Data="M1,1 L7,7 M1,7 L7,1"
                                                    Width="16"
                                                    Height="16"
                                                    />
                    </Button>
                </StackPanel>
                <tb:TaskbarIcon Grid.Column="2" x:Name="myNotifyIcon" Width="0" Height="0"
                    ToolTipText="Fallback ToolTip for Windows xp"
                        MenuActivation="All"
                                >
                    <tb:TaskbarIcon.ContextMenu>
                        <ContextMenu>
                            <MenuItem Click="MenuItemShow_Click" Header="Показать" />
                            <MenuItem Click="MenuItem_Click" Header="Выход" />
                        </ContextMenu>
                    </tb:TaskbarIcon.ContextMenu>
                </tb:TaskbarIcon>
            </Grid>
        </Border>
        <ListBox x:Name="listBox" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Transparent" Padding="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <controls:DpsRow Padding="0" Margin="0" HorizontalAlignment="Stretch"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Setter Property="Margin" Value="0 0 0 0"/>
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </ListBox.ItemContainerStyle>
            <controls:DpsRow procent="100" playerCount="123(45.6%)" playerName="Test"/>
        </ListBox>
    </DockPanel>
</Window>
